- 轻量、好用
- 场景：想要解决C10k——一万个并发
- 文件限制、进程限制、带宽限制、应用程序并发限制...
- 多数厂商会基于nginx进行二次开发

## 基础特性
- 静态、动态web资源的返回
- 反向代理
- 高可靠，低内存
- 异步epoll模型
- 热重载：不用重启主机
#### 正向代理与反向代理
- **所以，反向代理，其实是"代理服务器"代理了"目标服务器"，去和"客户端"进行交互。**
- **所以，正向代理，其实是"代理服务器"代理了"客户端"，去和"目标服务器"进行交互。**

- 对于客户端来说，存在两种情况——知道代理服务器位置——正向代理
- 不知道代理服务器位置，直接向目标发请求，但被截获再重定向——反向代理
- 正向代理用途：加速、隐藏用户ip、突破访问限制
- 反向代理用途：负载均衡、隐藏服务器ip、服务安全保障、加速（缓存服务）


- 正向代理一般是客户端架设，用于辅助远程连接
- 反向代理一般服务端架设，用于负载管控
[终于有人把正向代理和反向代理解释的明明白白了！-腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/1418457)


## 多进程结构
- nginx没有选择多线程。Master-Woker
#### Master进程
- 对外暴露接口，对内转发
- 监控worker进程
- 建立、绑定、关闭socket连接
- 热配置，热重启
- 编译处理perl脚本
#### Worker进程
- 所有进程平等
- 在nginx.conf配置进程数量，建议和核心数相同
- 响应请求
- 通过淘汰机制实现热配置

#### 进程间通信
- Master与Worker通过单向管道。Worker只能监听
- 通过工作进程表中记录的**进程信息**实现进程间通信


## IO多路复用机制
- 场景：html文件有很多，处理逻辑文件有很多，每次都要IO，太慢！
- 监视文件描述符
- 阻塞、非阻塞
- [Linux IO模式及 select、poll、epoll详解 - 人云思云 - SegmentFault 思否](https://segmentfault.com/a/1190000003063859#item-3-13)

#### 同步IO
- 卡死在一个Io上直到成功
#### 阻塞IO——等通知
- 等待数据准备-->通知进程-->执行
- 在等待期间可以做其他事，只是进程被block了

#### 非阻塞——不断轮询
- while1，循环请求，直到允许

#### select、poll、epoll—一定范围内轮询
- 先把进程block，然后逐个轮询进程负责的文件，有以下几种轮询策略：
	- select基于数组，类似一个bot数组，哪个好了哪个亮
	- poll基于链表：轮询->标记（美没有长度限制）
	- epoll：基于 event-监听事件 进行通知
	- nginx通过epoll实现


## Nginx安装配置
- 源码安装——方便拓展，但要配置环境、模块、systemctl
- 主配置文件：nginx.conf
	- 子配置文件：include conf.d
- 改子配置文件的好处：不容易改坏


#### 虚拟主机
- location是nginx路由的上下文
	- 记住通过location配路由以及所需鉴权就行
- 路由匹配的优先级
	- 如果一个文件有多个资源，按优先级匹配资源

#### https和证书


#### 按正则做筛选/按用户做筛选

#### 自定义错误页面




